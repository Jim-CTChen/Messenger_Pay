{"version":3,"sources":["agent.js","constants/config.js","AuthContext.js","constants/index.js","component/usage/User.js","component/Home.js","component/usage/MyPieChart.js","component/Friend.js","component/Group.js","component/Setting.js","component/About.js","component/template.js","component/Account.js","constants/route.js","component/Sidebar.js","component/Header.js","mateiralUITheme.js","container/Full.js","component/Login.js","component/Register.js","App.js","reportWebVitals.js","index.js"],"names":["axios","defaults","baseURL","headers","common","Accept","token","window","localStorage","getItem","Auth","authorization","a","get","login","body","post","result","data","success","setItem","User","createUser","getUserInfo","name","Event","createEvent","getFriendEvent","user","friend","updateEvent","put","getAllEvent","Group","createGroup","getGroupEvent","id","addUser","removeUser","AuthContext","createContext","children","useState","username","password","isLogin","currentUser","setCurrentUser","useEffect","console","log","Provider","value","PERSONAL","label","color","GROUP","seedrandom","require","COLOR_ARRAY","constants","props","onClick","setColor","style","display","cursor","rng","rand","Math","round","length","getColor","Box","Avatar","background","Typography","FILTER","key","collection","sign","type","withStyles","theme","paper","maxWidth","margin","blockPaper","padding","spacing","textAlign","palette","text","secondary","blockSec1","blockSec2","typography","width","alignItems","justifyContent","marginTop","marginBottom","divider","backgroundColor","height","listItem","box","red","green","classes","posAmount","setPosAmount","negAmount","setNegAmount","totalAmount","setTotalAmount","tabValue","setTabValue","filter","setFilter","openFriendDialog","setOpenFriendDialog","setName","amountSign","setAmountSign","amount","setAmount","comment","setComment","openGroupDialog","setOpenGroupDialog","groupName","setGroupName","groupUsers","setGroupUsers","friendList","setFriendList","groupList","setGroupList","history","useHistory","useContext","replace","pos","neg","forEach","balance","group","handleAmountCalculate","handleFriendClose","handleFriendSubmit","payload","creditor","debtor","Number","description","agent","alert","error","handleGroupClose","handleGroupSubmit","users","split","usernames","friends","groups","Grid","container","className","item","xs","Paper","variant","Divider","Tabs","tabs","indicatorColor","textColor","onChange","e","aria-label","map","Tab","mx","mt","align","IconButton","List","ListItem","button","push","handleFriendClick","mr","ListItemText","handleGroupClick","Dialog","open","onClose","DialogTitle","DialogContent","TextField","required","fullWidth","target","select","option","MenuItem","placeholder","isNaN","DialogActions","Button","disabled","autoFocus","colorArray","defaultLabelStyle","fontSize","fontFamily","fill","MyPieChart","hover","setHover","chartData","setChartData","newData","ele","idx","lineWidth","radius","dataEntry","dataIndex","unit","title","labelStyle","animate","animationDuration","labelPosition","onMouseOver","_","index","onMouseOut","undefined","TimeAgo","addDefaultLocale","zh","timeAgo","EVENT_TYPE","TAB_VALUE","eventList","setEventList","timeFromNow","setTimeFromNow","sum","setSum","openFriendEditDialog","setOpenFriendEditDialog","openFriendPayBackDialog","setOpenFriendPayBackDialog","timeChartData","setTimeChartData","amountChartData","setAmountChartData","setEditSign","editAmount","setEditAmount","editComment","setEditComment","payBackSign","setPayBackSign","payBackAmount","setPayBackAmount","payBackComment","setPayBackComment","anchorEl","setAnchorEl","currentEventId","setCurrentEventId","useParams","getEventInfo","events","handleFriendEditClose","handleFriendEditSubmit","eventId","handleFriendPayBackClose","handleFriendPayBackSubmit","total","time","Date","toISOString","userTimeData","userAmountData","interval","finalAmountData","Object","entries","finalTimeData","dayOffset","hourOffset","values","some","roundedValue","minOffset","tab","Table","TableHead","TableRow","TableCell","TableBody","event","Chip","format","dayjs","currentTarget","handleEventMoreActionClick","pt","Menu","Boolean","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","memberList","setMemberList","setMemberBalance","memberBalanceForUser","setMemberBalanceForUser","groupMemberOpen","setGroupMemberOpen","openDialog","setOpenDialog","openEditDialog","setOpenEditDialog","openPayBackDialog","setOpenPayBackDialog","setCreditor","setDebtor","openAddUserDialog","setOpenAddUserDialog","setAddUser","openRemoveUserDialog","setOpenRemoveUserDialog","setRemoveUser","currentCreditor","setCurrentCreditor","currentDebtor","setCurrentDebtor","handleClose","groupId","getGroupInfo","handleAddUserClose","handleAddUser","handleRemoveUserClose","handleRemoveUser","handleEditClose","handleEditSubmit","handlePayBackClose","handlePayBackSubmit","balanceList","balanceListForUser","i","creditorIdx","findIndex","member","debtorIdx","userLastDate","primary","Collapse","in","timeout","unmountOnExit","component","disablePadding","ListItemSecondaryAction","helperText","overflow","searchBar","borderBottom","searchInput","block","marginRight","contentWrapper","AppBar","position","elevation","Toolbar","InputProps","disableUnderline","Tooltip","route","path","Home","Friend","Setting","About","setBalance","p","Template","nav_items","categoryName","items","url","icon","categoryHeader","paddingTop","paddingBottom","categoryHeaderPrimary","white","itemCategory","boxShadow","firebase","itemActiveItem","itemPrimary","itemIcon","minWidth","other","Drawer","Hidden","smUp","clsx","ListItemIcon","Fragment","childId","active","lightColor","appBar","zIndex","menuButton","marginLeft","iconButtonAvatar","link","textDecoration","borderColor","onDrawerToggle","pl","size","removeItem","createMuiTheme","light","main","dark","h5","fontWeight","letterSpacing","h4","shape","borderRadius","MuiTab","disableRipple","mixins","toolbar","minHeight","overrides","MuiDrawer","MuiButton","textTransform","contained","MuiTabs","root","indicator","borderTopLeftRadius","borderTopRightRadius","breakpoints","up","MuiIconButton","MuiTooltip","tooltip","MuiDivider","MuiListItemText","fontWeightMedium","MuiListItemIcon","MuiAvatar","Copyright","Link","href","getFullYear","styles","drawer","flexShrink","app","flex","flexDirection","footer","mobileOpen","setMobileOpen","ThemeProvider","CssBaseline","exact","from","to","useStyles","makeStyles","backdrop","Login","setUsername","setPassword","isWaiting","setIsWaiting","isWaitingAuth","setIsWaitingAuth","handleSubmit","preventDefault","isTokenValid","checkAuth","onSubmit","my","InputLabelProps","shrink","Backdrop","CircularProgress","Register","App","Full","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7fe44331.chunk.js","sourcesContent":["import axios from 'axios'\nimport { API_ROOT } from './constants/config'\n\n\naxios.defaults.baseURL = API_ROOT\naxios.defaults.headers.common['Content-Type'] = 'application/json'\naxios.defaults.headers.common.Accept = 'application/json'\naxios.defaults.headers.common.token = window.localStorage.getItem('jwt')\n\nconst Auth = {\n  authorization: async () => await axios.get('/auth'),\n  login: async (body) => {\n    const result = await axios.post('/auth/login', body);\n    if (result.data.success) {\n      axios.defaults.headers.common.token = result.data.data;\n      window.localStorage.setItem('jwt', result.data.data);\n    }\n    return result\n  },\n}\n\nconst User = {\n  createUser: async (body) => await axios.post('/user', body),\n  getUserInfo: async (name) => await axios.get(`/user?username=${name}`)\n}\n\nconst Event = {\n  createEvent: async (body) => await axios.post('/event', body),\n  getFriendEvent: async (user, friend) =>\n    await axios.get(`/event/friend?username=${user}&friendName=${friend}`),\n  updateEvent: async (body) => await axios.put('/event', body),\n  getAllEvent: async (user) => await axios.get(`/event/all?username=${user}`)\n}\n\nconst Group = {\n  createGroup: async (body) => await axios.post('/group', body),\n  getGroupEvent: async (user, id) =>\n    await axios.get(`/group?username=${user}&groupId=${id}`),\n  addUser: async (body) => await axios.post('/group/addUser', body),\n  removeUser: async (body) => await axios.post('/group/removeUser', body)\n}\n\nexport default {\n  Auth,\n  User,\n  Event,\n  Group\n}","export const API_ROOT = '/api'","import React, { useState, useEffect, createContext } from \"react\";\nimport agent from \"./agent\";\n\nconst AuthContext = createContext(null);\n\nexport { AuthContext };\n\nexport default ({ children }) => {\n  const [currentUser, setCurrentUser] = useState({\n    name: null,\n    username: null,\n    password: null,\n    isLogin: false\n  });\n\n  useEffect(() => {\n    console.log('current', currentUser)\n  }, [currentUser])\n\n  return (\n    <AuthContext.Provider value={{ currentUser, setCurrentUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","const COLOR_ARRAY = ['#E38627', '#C13C37', '#6A2135',\n  '#00AA55', '#009FD4', '#B381B3', '#939393', '#E3BC00',\n  '#D47500', '#DC2A2A', '#cf3c88', '#d70c7e', '#b7b82d',\n  \"#FFB900\", \"#D83B01\", \"#B50E0E\", \"#E81123\", \"#B4009E\",\n  \"#DB4437\", \"#E91E63\", \"#9C27B0\", \"#673AB7\", \"#3F51B5\"\n];\n\nconst EVENT_TYPE = {\n  PERSONAL: {\n    label: '個人',\n    color: 'primary'\n  },\n  GROUP: {\n    label: '群組',\n    color: 'secondary'\n  },\n}\n\nexport default {\n  COLOR_ARRAY,\n  EVENT_TYPE\n}","import React, { useState, useEffect } from 'react'\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport constants from '../../constants/index'\nconst seedrandom = require('seedrandom');\n\nconst COLOR_ARRAY = constants.COLOR_ARRAY;\n\nfunction User(props) {\n  const { user, onClick } = props;\n  const [color, setColor] = useState(COLOR_ARRAY[0]);\n\n  const getColor = (name) => {\n    const rng = seedrandom(name);\n    let rand = Math.round(rng() * COLOR_ARRAY.length);\n    console.log('rand', rand)\n    return COLOR_ARRAY[rand];\n  }\n\n  const style = {\n    display: 'flex',\n    cursor: onClick ? 'pointer' : ''\n  }\n\n  useEffect(() => {\n    setColor(getColor(user));\n  }, [user])\n\n  return (\n    <Box style={style} onClick={() => {\n      if (onClick) onClick();\n    }}>\n      <Avatar style={{ background: color }}>{user[0]}</Avatar> &nbsp;&nbsp;\n      <Typography>{user}</Typography>\n    </Box>\n  )\n}\n\nexport default User","import { React, useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { withStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport { Icon } from '@material-ui/core';\n// Dialog\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport { AuthContext } from '../AuthContext';\nimport agent from '../agent';\nimport User from './usage/User';\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n  },\n  blockPaper: {\n    padding: theme.spacing(1),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  blockSec1: {\n    margin: theme.spacing(1),\n  },\n  blockSec2: {\n    margin: theme.spacing(2, 1),\n  },\n  typography: {\n    width: '33.3%',\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'rgba(0, 0, 0, 0.54)',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  divider: {\n    backgroundColor: '#e4e4e4',\n    height: '2px'\n  },\n  listItem: {\n    margin: '3px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  box: {\n    margin: '3px'\n  },\n  red: {\n    color: 'red'\n  },\n  green: {\n    color: 'green'\n  },\n});\n\nconst FILTER = [\n  { key: 0, label: '好友', collection: 'person' },\n  { key: 1, label: '群組', collection: 'group' },\n]\n\nconst sign = [\n  { type: '欠我', value: false },\n  { type: '我欠', value: true }\n]\n\nfunction Home(props) {\n  const { classes } = props;\n  const [posAmount, setPosAmount] = useState(0);\n  const [negAmount, setNegAmount] = useState(0);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [tabValue, setTabValue] = useState(0)\n  const [filter, setFilter] = useState(FILTER[0])\n  const [openFriendDialog, setOpenFriendDialog] = useState(false);\n  const [name, setName] = useState('');\n  const [amountSign, setAmountSign] = useState(false);\n  const [amount, setAmount] = useState('');\n  const [comment, setComment] = useState('');\n  const [openGroupDialog, setOpenGroupDialog] = useState(false);\n  const [groupName, setGroupName] = useState('');\n  const [groupUsers, setGroupUsers] = useState('');\n  const [friendList, setFriendList] = useState([]);\n  const [groupList, setGroupList] = useState([]);\n  const history = useHistory();\n  const { currentUser } = useContext(AuthContext);\n\n  const handleTabChange = (e, value) => {\n    setTabValue(value)\n    setFilter(FILTER[value])\n  }\n\n  const handleIsLogin = () => {\n    if (!currentUser.isLogin) {\n      history.replace('/login');\n    }\n  }\n\n  useEffect(() => {\n    handleIsLogin();\n  }, [history])\n\n  const handleAmountCalculate = () => {\n    let pos = 0\n    let neg = 0\n    if (tabValue === 0) {\n      if (friendList.length === 0) return\n      friendList.forEach(friend => {\n        if (friend.balance >= 0) pos += friend.balance\n        else neg += friend.balance\n      })\n      setPosAmount(pos)\n      setNegAmount(neg)\n      setTotalAmount(pos + neg)\n    }\n    else if (tabValue === 1) {\n      if (groupList.length === 0) return\n      groupList.forEach(group => {\n        if (group.balance >= 0) pos += group.balance\n        else neg += group.balance\n      })\n      setPosAmount(pos)\n      setNegAmount(neg)\n      setTotalAmount(pos + neg)\n    }\n  }\n\n  useEffect(() => {\n    handleAmountCalculate();\n  }, [friendList, groupList, tabValue])\n\n  const handleFriendClose = () => {\n    setOpenFriendDialog(false)\n  };\n\n  const handleFriendSubmit = async () => {\n    const payload = {\n      creditor: amountSign ? name : currentUser.username,\n      debtor: amountSign ? currentUser.username : name,\n      amount: Number(amount),\n      description: comment,\n      type: 'PERSONAL'\n    }\n    try {\n      const result = await agent.Event.createEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenFriendDialog(false);\n        setName('');\n        setAmount('');\n        setComment('');\n        getUserInfo();\n      }\n    } catch (error) {\n      setOpenFriendDialog(false);\n      setName('');\n      setAmount('');\n      setComment('');\n      alert(error)\n    }\n  };\n\n  const handleGroupClose = () => {\n    setOpenGroupDialog(false)\n  };\n\n  const handleGroupSubmit = async () => {\n    const users = groupUsers.split(' ')\n    const payload = {\n      groupName: groupName,\n      usernames: users\n    }\n    try {\n      const result = await agent.Group.createGroup(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenGroupDialog(false);\n        setGroupName('');\n        setGroupUsers('');\n        getUserInfo();\n      }\n    } catch (error) {\n      setOpenGroupDialog(false);\n      setGroupName('');\n      setGroupUsers('');\n      alert(error)\n    }\n  };\n\n  const getUserInfo = async () => {\n    if (!currentUser.isLogin) {\n      return\n    }\n    try {\n      const result = await agent.User.getUserInfo(currentUser.username);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setFriendList(result.data.data.friends);\n        setGroupList(result.data.data.groups);\n      }\n    } catch (error) {\n      alert(error);\n    }\n  }\n\n  const handleFriendClick = (name) => {\n    history.push(`/friend/${name}`);\n  }\n\n  const handleGroupClick = (groupName, id) => {\n    history.push(`/group/${groupName}/${id}`);\n    // history.push({ pathname: `/group/${name}`, data: { id: id } });\n  }\n\n  useEffect(() => {\n    getUserInfo();\n  }, [])\n\n  return (\n    <>\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.blockPaper}>\n            <div className={classes.blockSec1}>\n              <Typography variant=\"subtitle1\">\n                待回收\n              </Typography>\n            </div>\n            <Divider className={classes.divider} variant=\"middle\" />\n            <div className={classes.blockSec2}>\n              <Typography variant=\"h5\">\n                {posAmount}\n              </Typography>\n            </div>\n          </Paper>\n        </Grid>\n        <Grid item xs>\n          <Paper className={classes.blockPaper}>\n            <div className={classes.blockSec1}>\n              <Typography variant=\"subtitle1\">\n                待支出\n              </Typography>\n            </div>\n            <Divider className={classes.divider} variant=\"middle\" />\n            <div className={classes.blockSec2}>\n              <Typography variant=\"h5\">\n                {negAmount}\n              </Typography>\n            </div>\n          </Paper>\n        </Grid>\n        <Grid item xs>\n          <Paper className={classes.blockPaper}>\n            <div className={classes.blockSec1}>\n              <Typography variant=\"subtitle1\">\n                總結\n              </Typography>\n            </div>\n            <Divider className={classes.divider} variant=\"middle\" />\n            <div className={classes.blockSec2}>\n              <Typography variant=\"h5\">\n                {totalAmount}\n              </Typography>\n            </div>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.paper} color=\"primary\">\n            <Tabs\n              className={classes.tabs}\n              value={tabValue}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n              onChange={handleTabChange}\n              aria-label=\"disabled tabs example\"\n            >\n              {\n                FILTER.map(item =>\n                  <Tab\n                    className={classes.tabs}\n                    value={item.key}\n                    key={item.key}\n                    label={item.label}\n                  />\n                )\n              }\n            </Tabs>\n            <Divider className={classes.divider} />\n            <Box mx={2} mt={1} align='right'>\n              {filter.collection === 'person' ?\n                <IconButton onClick={() => setOpenFriendDialog(true)}>\n                  <AddIcon />\n                </IconButton> :\n                <IconButton onClick={() => setOpenGroupDialog(true)}>\n                  <AddIcon />\n                </IconButton>\n              }\n            </Box>\n\n            <List>\n              {filter.collection === 'person' ?\n                friendList.map(friend =>\n                  <ListItem\n                    button\n                    onClick={() => handleFriendClick(friend.username)}\n                    key={friend.username}\n                    className={classes.listItem}\n                  >\n                    <User user={friend.username} />\n                    <Box display=\"inline\" mr={3}>\n                      {\n                        friend.balance >= 0 ?\n                          <ListItemText className={classes.green}>\n                            {`+${friend.balance}`}\n                          </ListItemText> :\n                          <ListItemText className={classes.red}>\n                            {`${friend.balance}`}\n                          </ListItemText>\n                      }\n                    </Box>\n                  </ListItem>\n                ) : groupList.map(group =>\n                  <ListItem\n                    button\n                    onClick={() => handleGroupClick(group.groupName, group.id)}\n                    key={group.id}\n                    className={classes.listItem}\n                  >\n                    <User user={group.groupName} />\n                    <Box display=\"inline\" mr={3}>\n                      {\n                        group.balance >= 0 ?\n                          <ListItemText className={classes.green}>\n                            {`+${group.balance}`}\n                          </ListItemText> :\n                          <ListItemText className={classes.red}>\n                            {`${group.balance}`}\n                          </ListItemText>\n                      }\n                    </Box>\n                  </ListItem>\n                )\n              }\n            </List>\n            {/* <IconButton\n              onClick={() => { }}\n              style={{\n                background: 'white',\n                position: 'fixed',\n                right: '45px',\n                bottom: '45px',\n                boxShadow: '1px 1px 1px rgba(0, 0, 0, 0.7)'\n              }}\n            >\n              <AddIcon />\n            </IconButton> */}\n          </Paper>\n        </Grid>\n      </Grid>\n\n      <Dialog\n        open={openFriendDialog}\n        onClose={handleFriendClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>新增交易</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"對象\"\n            fullWidth\n            value={name}\n            onChange={e => setName(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            select\n            margin=\"dense\"\n            label=\"類別\"\n            value={amountSign}\n            onChange={e => setAmountSign(e.target.value)}\n          >\n            {sign.map((option) => (\n              <MenuItem key={option.value} value={option.value}>\n                {option.type}\n              </MenuItem>\n            ))}\n          </TextField>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入數字\"\n            value={amount}\n            error={isNaN(amount)}\n            onChange={e => setAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={comment}\n            fullWidth\n            onChange={e => setComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleFriendClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={name === '' | amount === '' | isNaN(amount)}\n            onClick={handleFriendSubmit} color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Dialog\n        open={openGroupDialog}\n        onClose={handleGroupClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>新增群組</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            required\n            // margin=\"dense\"\n            label=\"群組名稱\"\n            fullWidth\n            value={groupName}\n            onChange={e => setGroupName(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            required\n            label=\"群組成員\"\n            fullWidth\n            placeholder=\"請以空白區隔\"\n            value={groupUsers}\n            onChange={e => setGroupUsers(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleGroupClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={groupName === \"\" | groupUsers === \"\"}\n            onClick={handleGroupSubmit}\n            color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n\nHome.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Home);","import React, { useState, useEffect } from 'react';\nimport { PieChart } from 'react-minimal-pie-chart';\nimport Box from '@material-ui/core/Box';\nimport constants from '../../constants/index'\n\nconst colorArray = constants.COLOR_ARRAY;\n\nconst defaultLabelStyle = {\n  fontSize: '5px',\n  fontFamily: 'sans-serif',\n  fill: 'white'\n};\n\nconst lineWidth = 60;\n\nfunction MyPieChart(props) {\n  const { data } = props;\n  const [hover, setHover] = useState(null);\n  const [chartData, setChartData] = useState(null);\n\n  useEffect(() => {\n    if (!data) setChartData(null);\n    else {\n      const newData = data.map((ele, idx) => {\n        return {\n          ...ele,\n          color: colorArray[idx]\n        }\n      })\n      setChartData(newData)\n    }\n  }, [data])\n\n  return (\n    <Box>\n      {chartData &&\n        <PieChart\n          lineWidth={lineWidth}\n          radius={40}\n          label={({ dataEntry, dataIndex }) => {\n            if (hover === dataIndex) {\n              return dataEntry.value + `${dataEntry.unit}`\n            }\n            else {\n              return dataEntry.title\n            }\n          }}\n          labelStyle={defaultLabelStyle}\n          animate\n          animationDuration={500}\n          data={chartData}\n          labelPosition={100 - lineWidth / 2}\n          onMouseOver={(_, index) => {\n            setHover(index);\n          }}\n          onMouseOut={() => {\n            setHover(undefined);\n          }}\n        />\n      }\n    </Box>\n  )\n}\n\nexport default MyPieChart;","import { React, useState, useEffect, useContext } from 'react';\nimport { useHistory, useParams } from 'react-router-dom'\nimport dayjs from 'dayjs'\nimport TimeAgo from 'javascript-time-ago'\nimport zh from 'javascript-time-ago/locale/zh-Hant'\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { withStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport HomeIcon from '@material-ui/icons/Home';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport { Icon } from '@material-ui/core';\n// Dialog\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip'\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport MyPieChart from './usage/MyPieChart';\nimport User from './usage/User';\nimport { AuthContext } from '../AuthContext'\nimport agent from '../agent';\nimport constants from '../constants/index'\n\nTimeAgo.addDefaultLocale(zh);\nconst timeAgo = new TimeAgo();\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n  },\n  blockPaper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n  },\n  typography: {\n    width: '100%',\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'rgba(0, 0, 0, 0.54)',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  divider: {\n    backgroundColor: '#e4e4e4',\n    height: '2px'\n  },\n  listItem: {\n    margin: '3px',\n    display: 'flex'\n  },\n  box: {\n    margin: '3px'\n  },\n  red: {\n    color: 'red'\n  },\n  green: {\n    color: 'green'\n  },\n});\n\nconst sign = [\n  { type: '欠我', value: false },\n  { type: '我欠', value: true }\n]\n\nconst EVENT_TYPE = constants.EVENT_TYPE;\n\nconst TAB_VALUE = [\n  { key: 0, label: '歷史紀錄' },\n  { key: 1, label: '統計' }\n]\n\nfunction Friend(props) {\n  const { classes } = props;\n\n  const [tabValue, setTabValue] = useState(0);\n  const [eventList, setEventList] = useState([])\n  const [timeFromNow, setTimeFromNow] = useState(false)\n  const [sum, setSum] = useState(0);\n  const [openFriendDialog, setOpenFriendDialog] = useState(false);\n  const [openFriendEditDialog, setOpenFriendEditDialog] = useState(false);\n  const [openFriendPayBackDialog, setOpenFriendPayBackDialog] = useState(false);\n  const [amountSign, setAmountSign] = useState(false);\n  const [amount, setAmount] = useState('');\n  const [comment, setComment] = useState('');\n  const [timeChartData, setTimeChartData] = useState([]);\n  const [amountChartData, setAmountChartData] = useState([]);\n\n  const [editSign, setEditSign] = useState(false);\n  const [editAmount, setEditAmount] = useState('');\n  const [editComment, setEditComment] = useState('');\n  const [payBackSign, setPayBackSign] = useState(false);\n  const [payBackAmount, setPayBackAmount] = useState(0);\n  const [payBackComment, setPayBackComment] = useState('')\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [currentEventId, setCurrentEventId] = useState('');\n  const history = useHistory();\n  const { currentUser } = useContext(AuthContext);\n  const { friend } = useParams();\n\n  const handleFriendClose = () => {\n    setOpenFriendDialog(false)\n  };\n\n  const handleFriendSubmit = async () => {\n    const payload = {\n      creditor: amountSign ? friend : currentUser.username,\n      debtor: amountSign ? currentUser.username : friend,\n      amount: Number(amount),\n      description: comment,\n      type: 'PERSONAL'\n    }\n    try {\n      const result = await agent.Event.createEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenFriendDialog(false);\n        setAmount('');\n        setComment('');\n        getEventInfo();\n      }\n    } catch (error) {\n      setOpenFriendDialog(false);\n      setAmount('');\n      setComment('');\n      alert(error)\n    }\n  };\n\n  const getEventInfo = async () => {\n    if (!currentUser.username) return\n    try {\n      const result = await agent.Event.getFriendEvent(currentUser.username, friend);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setEventList(result.data.data.events)\n      }\n    } catch (error) {\n      alert(error);\n    }\n  }\n\n  const handleEventMoreActionClick = (e, id, amount, comment) => {\n    setAnchorEl(e.currentTarget)\n    setCurrentEventId(id)\n    setEditSign((Number(amount) >= 0) ? false : true)\n    setEditAmount((Number(amount) >= 0) ? Number(amount) : (-1) * Number(amount))\n    setEditComment(comment)\n    setPayBackSign((Number(amount) >= 0) ? false : true)\n    setPayBackAmount((Number(amount) >= 0) ? Number(amount) : (-1) * Number(amount))\n    setPayBackComment((Number(amount) >= 0) ? `收錢：${comment}` : `還錢：${comment}`)\n  }\n\n  const handleEditClick = () => {\n    setAnchorEl(null)\n    setOpenFriendEditDialog(true);\n  }\n\n  const handleFriendEditClose = () => {\n    setOpenFriendEditDialog(false)\n  };\n\n  const handleFriendEditSubmit = async () => {\n    const payload = {\n      username: currentUser.username,\n      eventId: currentEventId,\n      amount: Number(editAmount),\n      description: editComment,\n      type: 'PERSONAL',\n    }\n    try {\n      const result = await agent.Event.updateEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenFriendEditDialog(false);\n        setEditAmount('');\n        setEditComment('');\n        getEventInfo();\n      }\n    } catch (error) {\n      setOpenFriendEditDialog(false);\n      setEditAmount('');\n      setEditComment('');\n      alert(error)\n    }\n  };\n\n  const handlePayBackClick = () => {\n    setAnchorEl(null)\n    setOpenFriendPayBackDialog(true);\n  }\n\n  const handleFriendPayBackClose = () => {\n    setOpenFriendPayBackDialog(false)\n  };\n\n  const handleFriendPayBackSubmit = async () => {\n    const payload = {\n      creditor: payBackSign ? currentUser.username : friend,\n      debtor: payBackSign ? friend : currentUser.username,\n      amount: Number(payBackAmount),\n      description: payBackComment,\n      type: 'PERSONAL'\n    }\n    try {\n      const result = await agent.Event.createEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenFriendPayBackDialog(false);\n        setPayBackSign(false);\n        setPayBackAmount(0);\n        setPayBackComment('');\n        getEventInfo();\n      }\n    } catch (error) {\n      setOpenFriendPayBackDialog(false);\n      setPayBackSign(false);\n      setPayBackAmount(0);\n      setPayBackComment('');\n      alert(error)\n    }\n  };\n\n  useEffect(() => {\n    getEventInfo();\n  }, [])\n\n  useEffect(() => {\n    if (eventList.length === 0) return\n    let total = 0\n    eventList.forEach(ele => {\n      total += ele.amount\n    })\n    setSum(total)\n  }, [eventList])\n\n  useEffect(() => { // parse chart data\n    if (!eventList) return;\n    const username = currentUser.username;\n    const newData = [...eventList, { time: new Date().toISOString() }];\n    const userTimeData = {};\n    const userAmountData = {};\n    userTimeData[`${username}`] = 0;\n    userAmountData[`${username}`] = 0;\n    userTimeData[`${friend}`] = 0;\n    userAmountData[`${friend}`] = 0;\n    let balance = 0;\n    newData.forEach((ele, idx) => {\n      if (ele.amount) {\n        balance += ele.amount;\n        // amount chart data\n        if (balance > 0) {\n          if (userAmountData[`${friend}`] < balance) {\n            userAmountData[`${friend}`] = balance;\n          }\n        }\n        else if (balance < 0) {\n          if (userAmountData[`${username}`] < -balance) {\n            userAmountData[`${username}`] = -balance;\n          }\n        }\n\n        // time chart data\n        let interval = new Date(newData[idx + 1].time) - new Date(ele.time);\n        if (balance > 0) {\n          if (userTimeData[`${friend}`]) {\n            userTimeData[`${friend}`] += interval;\n          }\n          else userTimeData[`${friend}`] = interval;\n        }\n        else if (balance < 0) {\n          if (userTimeData[`${username}`]) {\n            userTimeData[`${username}`] += interval;\n          }\n          else userTimeData[`${username}`] = interval;\n        }\n      }\n    })\n    // amount chart data\n    const finalAmountData = [];\n\n    for (const [key, value] of Object.entries(userAmountData)) {\n      if (value !== 0) {\n        finalAmountData.push({\n          title: key,\n          value: Math.round(value),\n          unit: '元'\n        });\n      }\n    }\n    setAmountChartData(finalAmountData);\n\n    // time chart data\n    const finalTimeData = [];\n    const dayOffset = 24 * 60 * 60 * 1000;\n    const hourOffset = 60 * 60 * 1000;\n    const minOffset = 60 * 1000;\n    const secOffset = 1000;\n    if (Object.values(userTimeData).some(value => value >= dayOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / dayOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '天'\n          });\n        }\n      }\n    }\n    else if (Object.values(userTimeData).some(value => value >= hourOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / hourOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '小時'\n          });\n        }\n      }\n    }\n    else if (Object.values(userTimeData).some(value => value >= minOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / minOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '分鐘'\n          });\n        }\n      }\n    }\n    else {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / secOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '秒鐘'\n          });\n        }\n      }\n    }\n    setTimeChartData(finalTimeData);\n  }, [eventList])\n\n  return (\n    <>\n      {/* friend name & total */}\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.blockPaper} color=\"primary\">\n            <Box mx={2} style={{ display: 'flex', justifyContent: 'space-between' }}>\n              <User user={friend} />\n              <Box style={{ display: 'flex' }}>\n                <Typography>\n                  {`合計：${(sum < 0) ? '' : '+'}${sum}`}\n                </Typography>&nbsp;&nbsp;\n                {/* {sum !== 0 &&\n                  <Button\n                    size=\"small\"\n                    variant=\"outlined\"\n                    color={sum < 0 ? \"secondary\" : \"primary\"}\n                    onClick={() => {\n                      setComment(sum < 0 ? '還清' : '結清')\n                      setAmountSign(sum >= 0);\n                      setAmount(Math.abs(sum));\n                      setOpenFriendDialog(true);\n                    }}\n                  >\n                    {sum < 0 ? '還清' : '結清'}\n                  </Button>\n                } */}\n              </Box>\n            </Box>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      {/* history & chart */}\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.paper} color=\"primary\">\n            <Tabs\n              value={tabValue}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n              onChange={(e, value) => { setTabValue(value) }}\n            >\n              {\n                TAB_VALUE.map(tab =>\n                  <Tab\n                    value={tab.key}\n                    key={tab.key}\n                    label={tab.label}\n                  />)\n              }\n            </Tabs>\n            <Divider className={classes.divider} />\n            {\n              tabValue === 0 ?\n                <>\n                  <Box mx={2} mt={1} align='right'>\n                    <IconButton onClick={() => setTimeFromNow(!timeFromNow)}>\n                      <AccessTimeIcon />\n                    </IconButton>\n                    <IconButton onClick={() => setOpenFriendDialog(true)}>\n                      <AddIcon />\n                    </IconButton>\n                    <IconButton onClick={() => history.push('/home')}>\n                      <HomeIcon />\n                    </IconButton>\n                  </Box>\n\n                  <Table>\n                    <colgroup>\n                      <col width=\"15%\" />\n                      <col width=\"30%\" />\n                      <col width=\"25%\" />\n                      <col width=\"25%\" />\n                      <col width=\"5%\" />\n                    </colgroup>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell align=\"center\">類型</TableCell>\n                        <TableCell align=\"center\">敘述</TableCell>\n                        <TableCell align=\"center\">金額</TableCell>\n                        <TableCell align=\"center\">時間</TableCell>\n                        <TableCell align=\"center\"></TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {eventList.map((event, id) => (\n                        <TableRow key={id}>\n                          <TableCell align=\"center\">\n                            <Chip\n                              color={EVENT_TYPE[event.type].color}\n                              label={EVENT_TYPE[event.type].label}\n                              variant=\"outlined\"\n                            />\n                          </TableCell>\n                          <TableCell align=\"center\">{event.description}</TableCell>\n                          <TableCell align=\"center\" className={(event.amount < 0) ? classes.red : classes.green}>\n                            {(event.amount < 0) ? event.amount : `+${event.amount}`}\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            {timeFromNow ?\n                              timeAgo.format(new Date(event.time)) :\n                              dayjs(event.time).format('YYYY/MM/DD HH:mm')\n                            }\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            <IconButton onClick={e =>\n                              handleEventMoreActionClick(e, event.id, event.amount, event.description)}\n                            >\n                              <MoreVertIcon />\n                            </IconButton>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </> :\n                <>\n                  <Grid container>\n                    <Grid item xs={6}>\n                      <Box pt={3}>\n                        <Typography variant=\"h5\" align=\"center\">欠債時間長度</Typography>\n                        <MyPieChart data={timeChartData} />\n                      </Box>\n                    </Grid>\n                    <Grid item xs={6}>\n                      <Box pt={3}>\n                        <Typography variant=\"h5\" align=\"center\">最高欠債金額</Typography>\n                        <MyPieChart data={amountChartData} />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </>\n            }\n\n\n          </Paper>\n        </Grid>\n      </Grid>\n\n      {/* history list menu */}\n      <Menu\n        id=\"account-menu\"\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={() => setAnchorEl(null)}\n        keepMounted\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center'\n        }}\n      >\n        <MenuItem onClick={handleEditClick}>編輯</MenuItem>\n        <MenuItem onClick={handlePayBackClick}>{payBackSign ? \"還錢\" : \"收錢\"}</MenuItem>\n      </Menu>\n\n      {/* new event dialog */}\n      <Dialog\n        open={openFriendDialog}\n        onClose={handleFriendClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>新增交易</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            disabled\n            margin=\"dense\"\n            label=\"對象\"\n            fullWidth\n            value={friend}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            select\n            margin=\"dense\"\n            label=\"類別\"\n            value={amountSign}\n            onChange={e => setAmountSign(e.target.value)}\n          >\n            {sign.map((option) => (\n              <MenuItem key={option.value} value={option.value}>\n                {option.type}\n              </MenuItem>\n            ))}\n          </TextField>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={amount}\n            error={isNaN(amount) | amount < 0}\n            onChange={e => setAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={comment}\n            fullWidth\n            onChange={e => setComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleFriendClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={isNaN(amount) | amount === '' | amount < 0}\n            onClick={handleFriendSubmit} color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* edit event dialog */}\n      <Dialog\n        open={openFriendEditDialog}\n        onClose={handleFriendEditClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>編輯交易</DialogTitle>\n        <DialogContent>\n          <Typography>{payBackSign ? `我欠${friend}` : `${friend}欠我`}</Typography>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={editAmount}\n            error={isNaN(editAmount) | editAmount < 0}\n            onChange={e => setEditAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={editComment}\n            fullWidth\n            onChange={e => setEditComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleFriendEditClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={isNaN(editAmount) | editAmount === '' | editAmount < 0}\n            onClick={handleFriendEditSubmit} color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* pay back event dialog */}\n      <Dialog\n        open={openFriendPayBackDialog}\n        onClose={handleFriendPayBackClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>{payBackSign ? `還給${friend}` : `向${friend}收取`}</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={payBackAmount}\n            error={isNaN(payBackAmount) | payBackAmount < 0}\n            onChange={e => setPayBackAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={payBackComment}\n            fullWidth\n            onChange={e => setPayBackComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleFriendPayBackClose} color=\"primary\">\n            取消\n        </Button>\n          <Button\n            disabled={isNaN(payBackAmount) | payBackAmount === '' | payBackAmount < 0}\n            onClick={handleFriendPayBackSubmit} color=\"primary\"\n          >\n            確認\n        </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n\nFriend.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Friend);","import { React, useState, useEffect, useContext } from 'react';\nimport { useHistory, useParams, useLocation } from 'react-router-dom'\nimport dayjs from 'dayjs'\nimport TimeAgo from 'javascript-time-ago'\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { withStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider'\nimport Avatar from '@material-ui/core/Avatar';\nimport Box from '@material-ui/core/Box'\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport HomeIcon from '@material-ui/icons/Home';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachMoneyIcon from '@material-ui/icons/AttachMoney';\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport { Icon, useEventCallback } from '@material-ui/core';\n// Dialog\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Chip from '@material-ui/core/Chip'\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport Grid from '@material-ui/core/Grid';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Collapse from '@material-ui/core/Collapse';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\n\nimport MyPieChart from './usage/MyPieChart';\nimport User from './usage/User';\nimport { AuthContext } from '../AuthContext'\nimport agent from '../agent'\n\nconst timeAgo = new TimeAgo()\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n  },\n  blockPaper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n  },\n  typography: {\n    width: '100%',\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'rgba(0, 0, 0, 0.54)',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  divider: {\n    backgroundColor: '#e4e4e4',\n    height: '2px'\n  },\n  listItem: {\n    margin: '3px',\n    display: 'flex'\n  },\n  box: {\n    margin: '3px'\n  },\n  red: {\n    color: 'red'\n  },\n  green: {\n    color: 'green'\n  },\n});\n\nconst TAB_VALUE = [\n  { key: 0, label: '歷史紀錄' },\n  { key: 1, label: '統計' }\n]\n\nfunction Group(props) {\n  const { classes } = props;\n\n  const [tabValue, setTabValue] = useState(0);\n  const [memberList, setMemberList] = useState([]);\n  const [eventList, setEventList] = useState([]);\n  const [memberBalance, setMemberBalance] = useState([])\n  const [memberBalanceForUser, setMemberBalanceForUser] = useState([])\n  const [timeFromNow, setTimeFromNow] = useState(false);\n  const [sum, setSum] = useState(0);\n  const [groupMemberOpen, setGroupMemberOpen] = useState(false);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [openEditDialog, setOpenEditDialog] = useState(false);\n  const [openPayBackDialog, setOpenPayBackDialog] = useState(false);\n  const [creditor, setCreditor] = useState('');\n  const [debtor, setDebtor] = useState('');\n  const [amount, setAmount] = useState('');\n  const [comment, setComment] = useState('');\n  const [openAddUserDialog, setOpenAddUserDialog] = useState(false);\n  const [addUser, setAddUser] = useState('');\n  const [openRemoveUserDialog, setOpenRemoveUserDialog] = useState(false);\n  const [removeUser, setRemoveUser] = useState('');\n  const [timeChartData, setTimeChartData] = useState([]);\n  const [amountChartData, setAmountChartData] = useState([]);\n  const [editAmount, setEditAmount] = useState('');\n  const [editComment, setEditComment] = useState('');\n  const [payBackAmount, setPayBackAmount] = useState(0);\n  const [payBackComment, setPayBackComment] = useState('');\n  const [currentCreditor, setCurrentCreditor] = useState('');\n  const [currentDebtor, setCurrentDebtor] = useState('');\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [currentEventId, setCurrentEventId] = useState('');\n\n  const history = useHistory();\n  const { currentUser } = useContext(AuthContext);\n  const { groupName, id } = useParams();\n\n  const handleClick = () => {\n    setGroupMemberOpen(!groupMemberOpen);\n  };\n\n  const handleClose = () => {\n    setOpenDialog(false)\n  };\n\n  const handleGroupSubmit = async () => {\n    const payload = {\n      creditor: creditor,\n      debtor: debtor,\n      amount: Number(amount),\n      description: comment,\n      type: 'GROUP',\n      groupId: id\n    }\n    try {\n      const result = await agent.Event.createEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenDialog(false);\n        setCreditor('');\n        setDebtor('');\n        setAmount('');\n        setComment('');\n        getGroupInfo();\n      }\n    } catch (error) {\n      setOpenDialog(false);\n      setCreditor('');\n      setDebtor('');\n      setAmount('');\n      setComment('');\n      alert(error)\n    }\n  };\n\n  const handleAddUserClose = () => {\n    setOpenAddUserDialog(false)\n  };\n\n  const handleAddUser = async () => {\n    const users = addUser.split(' ')\n    const payload = {\n      groupId: id,\n      usernames: users\n    }\n    try {\n      const result = await agent.Group.addUser(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenAddUserDialog(false);\n        setAddUser('')\n        getGroupInfo();\n      }\n    } catch (error) {\n      setOpenAddUserDialog(false);\n      setAddUser('')\n      alert(error)\n    }\n  }\n\n  const handleRemoveUserClose = () => {\n    setOpenRemoveUserDialog(false)\n  };\n\n  const handleRemoveUser = async () => {\n    const payload = {\n      groupId: id,\n      usernames: removeUser\n    }\n    try {\n      const result = await agent.Group.removeUser(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenRemoveUserDialog(false)\n        setRemoveUser('')\n        if (removeUser === currentUser.username) {\n          history.replace('/home')\n        }\n        else {\n          getGroupInfo();\n        }\n      }\n    } catch (error) {\n      alert(error)\n    }\n  }\n\n  const getGroupInfo = async () => {\n    if (!currentUser.username) return\n    try {\n      const result = await agent.Group.getGroupEvent(currentUser.username, id);\n      if (!result.data.success) {\n        alert(result.data.error);\n        history.push('/home')\n      }\n      else {\n        setMemberList(result.data.data.users)\n        setEventList(result.data.data.events)\n      }\n    } catch (error) {\n      alert(error);\n    }\n  }\n\n  const handleEventMoreActionClick = (e, id, creditor, debtor, amount, comment) => {\n    setAnchorEl(e.currentTarget)\n    setCurrentEventId(id)\n    setCurrentCreditor(creditor)\n    setCurrentDebtor(debtor)\n    setEditAmount(Number(amount))\n    setEditComment(comment)\n    setPayBackAmount(Number(amount))\n    setPayBackComment(`${debtor}還錢：${comment}`)\n  }\n\n  const handleEditClick = () => {\n    setAnchorEl(null)\n    setOpenEditDialog(true);\n  }\n\n  const handleEditClose = () => {\n    setOpenEditDialog(false)\n  };\n\n  const handleEditSubmit = async () => {\n    const payload = {\n      username: currentUser.username,\n      eventId: currentEventId,\n      amount: Number(editAmount),\n      description: editComment,\n      type: 'GROUP',\n    }\n    try {\n      const result = await agent.Event.updateEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenEditDialog(false);\n        setEditAmount('');\n        setEditComment('');\n        getGroupInfo();\n      }\n    } catch (error) {\n      setOpenEditDialog(false);\n      setEditAmount('');\n      setEditComment('');\n      alert(error)\n    }\n  };\n\n  const handlePayBackClick = () => {\n    setAnchorEl(null)\n    setOpenPayBackDialog(true);\n  }\n\n  const handlePayBackClose = () => {\n    setOpenPayBackDialog(false)\n  };\n\n  const handlePayBackSubmit = async () => {\n    const payload = {\n      creditor: currentDebtor,\n      debtor: currentCreditor,\n      amount: Number(payBackAmount),\n      description: payBackComment,\n      type: 'GROUP',\n      groupId: id\n    }\n    try {\n      const result = await agent.Event.createEvent(payload);\n      if (!result.data.success) {\n        alert(result.data.error);\n      }\n      else {\n        setOpenPayBackDialog(false);\n        setPayBackAmount(0);\n        setPayBackComment('');\n        getGroupInfo();\n      }\n    } catch (error) {\n      setOpenPayBackDialog(false);\n      setPayBackAmount(0);\n      setPayBackComment('');\n      alert(error)\n    }\n  };\n\n  useEffect(() => {\n    getGroupInfo();\n  }, [])\n\n  useEffect(() => {\n    if (eventList.length === 0) return\n    let total = 0\n    let balanceList = [];\n    let balanceListForUser = [];\n    for (let i = 0; i < memberList.length; i += 1) {\n      balanceList.push(0);\n      balanceListForUser.push(0);\n    }\n    eventList.forEach(event => {\n      let creditorIdx = memberList.findIndex(member => event.creditor === member);\n      let debtorIdx = memberList.findIndex(member => event.debtor === member);\n      balanceList[creditorIdx] += event.amount;\n      balanceList[debtorIdx] -= event.amount;\n      if (event.creditor === currentUser.username) {\n        balanceListForUser[debtorIdx] += event.amount\n        console.log(balanceListForUser[debtorIdx])\n        total += event.amount\n      }\n      else if (event.debtor === currentUser.username) {\n        balanceListForUser[creditorIdx] -= event.amount\n        total -= event.amount\n      }\n      // console.log(balanceListForUser[debtorIdx])\n    })\n    setSum(total)\n    setMemberBalance(balanceList);\n    setMemberBalanceForUser(balanceListForUser);\n  }, [eventList])\n\n  useEffect(() => {\n    if (!eventList) return;\n    const newData = [...eventList, { time: new Date().toISOString() }]\n    const userTimeData = {};\n    const userAmountData = {};\n    const userLastDate = {};\n    const balance = {};\n    memberList.forEach(member => {\n      userTimeData[`${member}`] = 0;\n      userAmountData[`${member}`] = 0;\n      balance[`${member}`] = 0;\n      userLastDate[`${member}`] = 0;\n    })\n    newData.forEach((ele, idx) => {\n      if (ele.amount) {\n        balance[`${ele.creditor}`] += ele.amount;\n        balance[`${ele.debtor}`] -= ele.amount;\n        // amount chart data\n        if (balance[`${ele.debtor}`] < 0 && userAmountData[`${ele.debtor}`] < -balance[`${ele.debtor}`]) {\n          userAmountData[`${ele.debtor}`] = -balance[`${ele.debtor}`];\n        }\n\n        // time chart data\n        if (balance[`${ele.creditor}`] > 0) {\n          if (userLastDate[`${ele.creditor}`] !== 0) {\n            userTimeData[`${ele.creditor}`] += new Date(ele.time) - userLastDate[`${ele.creditor}`];\n            userLastDate[`${ele.creditor}`] = 0;\n          }\n        }\n        else if (balance[`${ele.creditor}`] < 0) {\n          if (userLastDate[`${ele.creditor}`] === 0) {\n            userLastDate[`${ele.creditor}`] = new Date(ele.time);\n          }\n        }\n        if (balance[`${ele.debtor}`] > 0) {\n          if (userLastDate[`${ele.debtor}`] !== 0) {\n            userTimeData[`${ele.debtor}`] += new Date(ele.time) - userLastDate[`${ele.debtor}`];\n            userLastDate[`${ele.debtor}`] = 0;\n          }\n        }\n        else if (balance[`${ele.debtor}`] < 0) {\n          if (userLastDate[`${ele.debtor}`] === 0) {\n            userLastDate[`${ele.debtor}`] = new Date(ele.time);\n          }\n        }\n      }\n      else {\n        memberList.forEach(member => {\n          if (userLastDate[`${member}`] !== 0) {\n            userTimeData[`${member}`] += new Date(ele.time) - userLastDate[`${member}`];\n          }\n        })\n      }\n    })\n\n    // amount chart data\n    const finalAmountData = [];\n\n    for (const [key, value] of Object.entries(userAmountData)) {\n      if (value !== 0) {\n        finalAmountData.push({\n          title: key,\n          value: value,\n          unit: '元'\n        });\n      }\n    }\n    setAmountChartData(finalAmountData);\n\n    // time chart data\n    const finalTimeData = [];\n    const dayOffset = 24 * 60 * 60 * 1000;\n    const hourOffset = 60 * 60 * 1000;\n    const minOffset = 60 * 1000;\n    const secOffset = 1000;\n    console.log('time', userTimeData)\n    if (Object.values(userTimeData).some(value => value >= dayOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / dayOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '天'\n          });\n        }\n      }\n    }\n    else if (Object.values(userTimeData).some(value => value >= hourOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / hourOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '小時'\n          });\n        }\n      }\n    }\n    else if (Object.values(userTimeData).some(value => value >= minOffset / 2)) {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / minOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '分鐘'\n          });\n        }\n      }\n    }\n    else {\n      for (const [key, value] of Object.entries(userTimeData)) {\n        let roundedValue = Math.round(value / secOffset, -1);\n        if (roundedValue !== 0) {\n          finalTimeData.push({\n            title: key,\n            value: roundedValue,\n            unit: '秒鐘'\n          });\n        }\n      }\n    }\n    setTimeChartData(finalTimeData);\n\n  }, [eventList])\n\n  return (\n    <>\n      {/* group name & total */}\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.blockPaper} color=\"primary\">\n            <Box mx={2} style={{ display: 'flex', justifyContent: 'space-between' }}>\n              <Box style={{ display: 'flex' }}>\n                <User user={groupName} />\n              </Box>\n              <Typography >\n                {`合計：${(sum < 0) ? '' : '+'}${sum}`}\n              </Typography>\n            </Box>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      {/* group member list */}\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.blockPaper} color=\"primary\">\n            <ListItem button onClick={handleClick}>\n              <ListItemText primary=\"群組成員\" />\n              {groupMemberOpen ? <ExpandLess /> : <ExpandMore />}\n            </ListItem>\n            <Collapse in={groupMemberOpen} timeout=\"auto\" unmountOnExit>\n              <List component=\"div\" disablePadding>\n                <Box mx={2} mt={1} align='right'>\n                  <IconButton onClick={() => setOpenAddUserDialog(true)}>\n                    <AddIcon />\n                  </IconButton>\n                  <IconButton onClick={() => setOpenRemoveUserDialog(true)}>\n                    <DeleteIcon />\n                  </IconButton>\n                </Box>\n                {memberList.map((user, idx) => (\n                  <ListItem className={classes.listItem}>\n                    <User user={user} />\n                    <ListItemSecondaryAction>\n                      {\n                        user === currentUser.username ? <></> :\n                          <ListItemText primary={`合計：${memberBalanceForUser[idx]}`} />\n                      }\n                      {/* <IconButton\n                        edge=\"end\"\n                        onClick={handleAddUser}\n                      >\n                        <AttachMoneyIcon />\n                      </IconButton> */}\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                ))}\n              </List>\n            </Collapse>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      {/* history & chart */}\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.paper} color=\"primary\">\n            <Tabs\n              value={tabValue}\n              indicatorColor=\"primary\"\n              textColor=\"primary\"\n              onChange={(e, value) => { setTabValue(value) }}\n            >\n              {\n                TAB_VALUE.map(tab =>\n                  <Tab\n                    value={tab.key}\n                    key={tab.key}\n                    label={tab.label}\n                  />)\n              }\n\n            </Tabs>\n            <Divider className={classes.divider} />\n            {\n              tabValue === 0 ?\n                <>\n                  <Box mx={2} mt={1} align='right'>\n                    <IconButton onClick={() => setTimeFromNow(!timeFromNow)}>\n                      <AccessTimeIcon />\n                    </IconButton>\n                    <IconButton onClick={() => setOpenDialog(true)}>\n                      <AddIcon />\n                    </IconButton>\n                    <IconButton onClick={() => history.push('/home')}>\n                      <HomeIcon />\n                    </IconButton>\n                  </Box>\n\n                  <Table>\n                    <colgroup>\n                      <col width=\"15%\" />\n                      <col width=\"15%\" />\n                      <col width=\"25%\" />\n                      <col width=\"20%\" />\n                      <col width=\"20%\" />\n                      <col width=\"5%\" />\n                    </colgroup>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell align=\"center\">債權人</TableCell>\n                        <TableCell align=\"center\">債務人</TableCell>\n                        <TableCell align=\"center\">敘述</TableCell>\n                        <TableCell align=\"center\">金額</TableCell>\n                        <TableCell align=\"center\">時間</TableCell>\n                        <TableCell align=\"center\"></TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                      {eventList.map((event, id) => (\n                        <TableRow key={id}>\n                          <TableCell align=\"center\">\n                            <User user={event.creditor} onClick={() => {\n                              if (event.creditor == currentUser.username) history.push('/account');\n                              else history.push(`/friend/${event.creditor}`);\n                            }} />\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            <User user={event.debtor} onClick={() => {\n                              if (event.debtor == currentUser.username) history.push('/account');\n                              else history.push(`/friend/${event.debtor}`);\n                            }} />\n                          </TableCell>\n                          <TableCell align=\"center\">{event.description}</TableCell>\n                          <TableCell align=\"center\" className={classes.green}>\n                            {event.amount}\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            {timeFromNow ?\n                              timeAgo.format(new Date(event.time)) :\n                              dayjs(event.time).format('YYYY/MM/DD HH:mm')\n                            }\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            {(currentUser.username === event.creditor |\n                              currentUser.username === event.debtor) ?\n                              <IconButton onClick={e =>\n                                handleEventMoreActionClick(e, event.id, event.creditor, event.debtor, event.amount, event.description)}\n                              >\n                                <MoreVertIcon />\n                              </IconButton> : <></>\n                            }\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </> :\n                <>\n                  <Grid container>\n                    <Grid item xs={6}>\n                      <Box pt={3}>\n                        <Typography variant=\"h5\" align=\"center\">欠債時間長度</Typography>\n                        <MyPieChart data={timeChartData} />\n                      </Box>\n                    </Grid>\n                    <Grid item xs={6}>\n                      <Box pt={3}>\n                        <Typography variant=\"h5\" align=\"center\">最高欠債金額</Typography>\n                        <MyPieChart data={amountChartData} />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </>\n            }\n\n          </Paper>\n        </Grid>\n      </Grid>\n\n      <Menu\n        id=\"account-menu\"\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={() => setAnchorEl(null)}\n        keepMounted\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center'\n        }}\n      >\n        <MenuItem onClick={handleEditClick}>編輯</MenuItem>\n        <MenuItem onClick={handlePayBackClick}>{currentDebtor === currentUser.username ? \"還錢\" : \"收錢\"}</MenuItem>\n      </Menu>\n\n      {/* new event dialog */}\n      <Dialog\n        open={openDialog}\n        onClose={handleClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>新增交易</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            select\n            margin=\"dense\"\n            label=\"債權人\"\n            fullWidth\n            value={creditor}\n            onChange={e => setCreditor(e.target.value)}\n          >\n            {memberList && memberList.map(member =>\n              <MenuItem value={member} key={member}>\n                {member}\n              </MenuItem>\n            )}\n          </TextField>\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            required\n            select\n            margin=\"dense\"\n            label=\"債務人\"\n            fullWidth\n            error={debtor !== '' && creditor === debtor}\n            helperText={debtor !== '' && creditor === debtor && '債務人不可與債權人相同'}\n            value={debtor}\n            onChange={e => setDebtor(e.target.value)}\n          >\n            {memberList && memberList.map(member =>\n              <MenuItem value={member} key={member}>\n                {member}\n              </MenuItem>\n            )}\n          </TextField>\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={amount}\n            error={isNaN(amount) | amount < 0}\n            onChange={e => setAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={comment}\n            fullWidth\n            onChange={e => setComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={\n              creditor === '' ||\n              debtor === '' ||\n              isNaN(amount) ||\n              amount === '' ||\n              amount < 0 ||\n              creditor === debtor\n            }\n            onClick={handleGroupSubmit} color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* add member to group */}\n      <Dialog\n        open={openAddUserDialog}\n        onClose={handleAddUserClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>新增成員</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            label=\"新增成員\"\n            fullWidth\n            placeholder=\"請以空白區隔\"\n            value={addUser}\n            onChange={e => setAddUser(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleAddUserClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={addUser === \"\"}\n            onClick={handleAddUser}\n            color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* remove member from group */}\n      <Dialog\n        open={openRemoveUserDialog}\n        onClose={handleRemoveUserClose}\n        maxWidth=\"xs\"\n        fullWidth\n      >\n        <DialogTitle>移除成員</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            select\n            margin=\"dense\"\n            label=\"移除成員\"\n            fullWidth\n            value={removeUser}\n            onChange={e => setRemoveUser(e.target.value)}\n          >\n            {memberList && memberList.map(member =>\n              <MenuItem value={member} key={member}>\n                {member}\n              </MenuItem>\n            )}\n          </TextField>\n        </DialogContent>\n\n        <DialogActions>\n          <Button onClick={handleRemoveUserClose} color=\"primary\">\n            取消\n          </Button>\n          <Button\n            disabled={removeUser === \"\"}\n            onClick={handleRemoveUser}\n            color=\"primary\"\n          >\n            確認\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* edit event dialog */}\n      <Dialog\n        open={openEditDialog}\n        onClose={handleEditClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>編輯交易</DialogTitle>\n        <DialogContent>\n          <Typography>{`${currentDebtor}欠${currentCreditor}`}</Typography>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={editAmount}\n            error={isNaN(editAmount) | editAmount < 0}\n            onChange={e => setEditAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={editComment}\n            fullWidth\n            onChange={e => setEditComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleEditClose} color=\"primary\">\n            取消\n        </Button>\n          <Button\n            disabled={isNaN(editAmount) | editAmount === '' | editAmount < 0}\n            onClick={handleEditSubmit} color=\"primary\"\n          >\n            確認\n        </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* pay back event dialog */}\n      <Dialog\n        open={openPayBackDialog}\n        onClose={handlePayBackClose}\n        maxWidth=\"md\"\n      >\n        <DialogTitle>{currentDebtor === currentUser.username ? `${currentDebtor}還給${currentCreditor}` : `${currentCreditor}向${currentDebtor}收取`}</DialogTitle>\n        <DialogContent>\n          <TextField\n            required\n            margin=\"dense\"\n            label=\"金額\"\n            placeholder=\"請填入非負數字\"\n            value={payBackAmount}\n            error={isNaN(payBackAmount) | payBackAmount < 0}\n            onChange={e => setPayBackAmount(e.target.value)}\n          />\n        </DialogContent>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            label=\"備註\"\n            value={payBackComment}\n            fullWidth\n            onChange={e => setPayBackComment(e.target.value)}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handlePayBackClose} color=\"primary\">\n            取消\n        </Button>\n          <Button\n            disabled={isNaN(payBackAmount) | payBackAmount === '' | payBackAmount < 0}\n            onClick={handlePayBackSubmit} color=\"primary\"\n          >\n            確認\n        </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n\nGroup.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Group);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container'\nimport SearchIcon from '@material-ui/icons/Search';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n    overflow: 'hidden',\n  },\n  searchBar: {\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n  },\n  searchInput: {\n    fontSize: theme.typography.fontSize,\n  },\n  block: {\n    display: 'block',\n  },\n  addUser: {\n    marginRight: theme.spacing(1),\n  },\n  contentWrapper: {\n    margin: '40px 16px',\n  },\n});\n\nfunction Setting(props) {\n  const { classes } = props;\n\n  return (\n    <div>\n      Setting page\n    </div>\n  );\n}\n\nSetting.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Setting);","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n    overflow: 'hidden',\n  },\n  searchBar: {\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n  },\n  searchInput: {\n    fontSize: theme.typography.fontSize,\n  },\n  block: {\n    display: 'block',\n  },\n  addUser: {\n    marginRight: theme.spacing(1),\n  },\n  contentWrapper: {\n    margin: '40px 16px',\n  },\n});\n\n\nfunction About(props) {\n  const { classes } = props;\n\n  return (\n    <div>\n      About page\n    </div>\n  );\n}\n\nAbout.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(About);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport { withStyles } from '@material-ui/core/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n    overflow: 'hidden',\n  },\n  searchBar: {\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n  },\n  searchInput: {\n    fontSize: theme.typography.fontSize,\n  },\n  block: {\n    display: 'block',\n  },\n  addUser: {\n    marginRight: theme.spacing(1),\n  },\n  contentWrapper: {\n    margin: '40px 16px',\n  },\n});\n\nfunction Template(props) {\n  const { classes } = props;\n\n  return (\n    <Paper className={classes.paper}>\n      <AppBar className={classes.searchBar} position=\"static\" color=\"default\" elevation={0}>\n        <Toolbar>\n          <Grid container spacing={2} alignItems=\"center\">\n            <Grid item>\n              <SearchIcon className={classes.block} color=\"inherit\" />\n            </Grid>\n            <Grid item xs>\n              <TextField\n                fullWidth\n                placeholder=\"Search by email address, phone number, or user UID\"\n                InputProps={{\n                  disableUnderline: true,\n                  className: classes.searchInput,\n                }}\n              />\n            </Grid>\n            <Grid item>\n              <Button variant=\"contained\" color=\"primary\" className={classes.addUser}>\n                Add user\n              </Button>\n              <Tooltip title=\"Reload\">\n                <IconButton>\n                  <RefreshIcon className={classes.block} color=\"inherit\" />\n                </IconButton>\n              </Tooltip>\n            </Grid>\n          </Grid>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.contentWrapper}>\n        <Typography color=\"textSecondary\" align=\"center\">\n          No users for this project yet\n        </Typography>\n      </div>\n    </Paper>\n  );\n}\n\nTemplate.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Template);","import React, { useState, useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport dayjs from 'dayjs';\nimport TimeAgo from 'javascript-time-ago';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Chip from '@material-ui/core/Chip';\nimport Avatar from '@material-ui/core/Avatar';\nimport AddIcon from '@material-ui/icons/Add';\nimport HomeIcon from '@material-ui/icons/Home';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Box from '@material-ui/core/Box';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Divider from '@material-ui/core/Divider';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport { AuthContext } from '../AuthContext'\nimport User from './usage/User';\nimport agent from '../agent'\nimport constants from '../constants/index'\n\nconst timeAgo = new TimeAgo();\n\nconst styles = (theme) => ({\n  paper: {\n    maxWidth: 936,\n    margin: 'auto',\n    overflow: 'hidden',\n  },\n  searchBar: {\n    borderBottom: '1px solid rgba(0, 0, 0, 0.12)',\n  },\n  searchInput: {\n    fontSize: theme.typography.fontSize,\n  },\n  block: {\n    display: 'block',\n  },\n  addUser: {\n    marginRight: theme.spacing(1),\n  },\n  contentWrapper: {\n    margin: '40px 16px',\n  },\n  typography: {\n    width: '100%',\n    display: 'inline-flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'rgba(0, 0, 0, 0.54)',\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  },\n  divider: {\n    backgroundColor: '#e4e4e4',\n    height: '2px'\n  },\n  red: {\n    color: 'red'\n  },\n  green: {\n    color: 'green'\n  },\n});\n\nconst EVENT_TYPE = constants.EVENT_TYPE;\nconst COLOR_ARRAY = constants.COLOR_ARRAY;\n\nfunction Account(props) {\n  const { classes } = props;\n  const { currentUser } = useContext(AuthContext);\n  const history = useHistory();\n  const [eventList, setEventList] = useState([]);\n  const [timeFromNow, setTimeFromNow] = useState(false);\n  const [balance, setBalance] = useState(0);\n\n  const getAllEvent = async () => {\n    if (!currentUser || !currentUser.username) return\n    try {\n      const result = await agent.Event.getAllEvent(currentUser.username);\n      if (result.data.success) {\n        setEventList(result.data.data.events);\n        setBalance(result.data.data.balance);\n      }\n    } catch (e) {\n      alert(e);\n    }\n  }\n\n  useEffect(() => {\n    getAllEvent();\n  }, [])\n\n  return (\n    <>\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.paper} color=\"primary\">\n            <Typography align=\"center\" className={classes.typography}>個人資料</Typography>\n            <Divider className={classes.divider} />\n            <>\n              <Box p={3}>\n                <Box style={{ display: 'flex' }}>\n                  <Typography>使用者：{currentUser.username}</Typography>\n                </Box>\n                <Box style={{ display: 'flex' }}>\n                  <Typography>合計：</Typography>\n                  <Typography className={(balance < 0) ? classes.red : classes.green}>\n                    {(balance < 0) ? balance : `+${balance}`}\n                  </Typography>\n                </Box>\n              </Box>\n            </>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={3} className={classes.paper}>\n        <Grid item xs>\n          <Paper className={classes.paper} color=\"primary\">\n            <Typography align=\"center\" className={classes.typography}>歷史紀錄</Typography>\n            <Divider className={classes.divider} />\n            <>\n              <Box mx={2} mt={1} align='right'>\n                <IconButton onClick={() => setTimeFromNow(!timeFromNow)}>\n                  <AccessTimeIcon />\n                </IconButton>\n                <IconButton onClick={() => history.push('/home')}>\n                  <HomeIcon />\n                </IconButton>\n              </Box>\n\n              <Table>\n                <colgroup>\n                  <col width=\"15%\" />\n                  <col width=\"20%\" />\n                  <col width=\"20%\" />\n                  <col width=\"25%\" />\n                  <col width=\"20%\" />\n                </colgroup>\n                <TableHead>\n                  <TableRow>\n                    <TableCell align=\"center\">對象</TableCell>\n                    <TableCell align=\"center\">類型</TableCell>\n                    <TableCell align=\"center\">敘述</TableCell>\n                    <TableCell align=\"center\">金額</TableCell>\n                    <TableCell align=\"center\">時間</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {eventList.map((event, id) => (\n                    <TableRow key={id}>\n                      <TableCell align=\"center\">\n                        <User user={event.friend} onClick={() => history.push(`/friend/${event.friend}`)} />\n                      </TableCell>\n                      <TableCell align=\"center\">\n                        <Chip\n                          color={EVENT_TYPE[event.type].color}\n                          label={EVENT_TYPE[event.type].label}\n                          variant=\"outlined\"\n                        />\n                      </TableCell>\n                      <TableCell align=\"center\">{event.description}</TableCell>\n                      <TableCell align=\"center\" className={(event.amount < 0) ? classes.red : classes.green}>\n                        {(event.amount < 0) ? event.amount : `+${event.amount}`}\n                      </TableCell>\n                      <TableCell align=\"center\">\n                        {timeFromNow ?\n                          timeAgo.format(new Date(event.time)) :\n                          dayjs(event.time).format('YYYY/MM/DD HH:mm')\n                        }\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </>\n\n\n          </Paper>\n        </Grid>\n      </Grid>\n    </>\n  );\n}\n\nAccount.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Account);","import SettingsIcon from '@material-ui/icons/Settings';\nimport PeopleIcon from '@material-ui/icons/People';\nimport Home from '../component/Home'\nimport Friend from '../component/Friend'\nimport Group from '../component/Group'\nimport Setting from '../component/Setting'\nimport About from '../component/About'\nimport Template from '../component/template'\nimport Account from '../component/Account'\n\nexport default {\n  route: [\n    // 首頁\n    { path: '/home', name: 'home', component: Home },\n\n    // 群組\n    // { path: '/groups', name: 'myGroups', component: Group },\n    { path: '/group/:groupName/:id', name: 'group', component: Group },\n\n    // 朋友\n    { path: '/friend/:friend', name: 'friend', component: Friend },\n\n    // 其他\n    { path: '/setting', name: 'setting', component: Setting },\n    { path: '/about', name: 'about', component: About },\n    { path: '/account', name: 'account', component: Account },\n    { path: '/template', name: 'template', component: Template },\n  ],\n  nav_items: [\n    {\n      categoryName: '群組',\n      items: [\n        { name: '我的群組', url: '/groups', icon: <PeopleIcon /> },\n        { name: '新增群組', url: '/groups/new', icon: <PeopleIcon /> }\n      ]\n    },\n    {\n      categoryName: '其他',\n      items: [\n        { name: '設定', url: '/setting', icon: <SettingsIcon /> },\n        { name: '關於', url: '/about', icon: <PeopleIcon /> },\n        { name: '模板', url: '/template', icon: <PeopleIcon /> },\n      ]\n    }\n\n  ]\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useHistory } from 'react-router-dom'\nimport { withStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport HomeIcon from '@material-ui/icons/Home';\nimport Hidden from '@material-ui/core/Hidden'\n\nimport route from '../constants/route'\n\nconst styles = (theme) => ({\n  categoryHeader: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  categoryHeaderPrimary: {\n    color: theme.palette.common.white,\n  },\n  item: {\n    paddingTop: 1,\n    paddingBottom: 1,\n    color: 'rgba(255, 255, 255, 0.7)',\n    '&:hover,&:focus': {\n      backgroundColor: 'rgba(255, 255, 255, 0.08)',\n    },\n  },\n  itemCategory: {\n    backgroundColor: '#232f3e',\n    boxShadow: '0 -1px 0 #404854 inset',\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  firebase: {\n    fontSize: 24,\n    color: theme.palette.common.white,\n  },\n  itemActiveItem: {\n    color: '#4fc3f7',\n  },\n  itemPrimary: {\n    fontSize: 'inherit',\n  },\n  itemIcon: {\n    minWidth: 'auto',\n    marginRight: theme.spacing(2),\n  },\n  divider: {\n    marginTop: theme.spacing(2),\n  },\n});\n\nfunction Sidebar(props) {\n  const { classes, ...other } = props;\n\n  const history = useHistory();\n\n  return (\n    <Drawer variant=\"permanent\" {...other}>\n      <List disablePadding>\n        <Hidden smUp>\n          <ListItem className={clsx(classes.firebase, classes.item, classes.itemCategory)}>\n            使用者資訊\n          </ListItem>\n        </Hidden>\n        <ListItem \n          className={clsx(classes.item, classes.itemCategory)} \n          button\n          onClick={() => history.push('/home')}\n        >\n          <ListItemIcon className={classes.itemIcon}>\n            <HomeIcon />\n          </ListItemIcon>\n          <ListItemText\n            classes={{\n              primary: classes.itemPrimary,\n            }}\n          >\n            首頁\n          </ListItemText>\n        </ListItem>\n        {route.nav_items.map(({ categoryName, items }) => (\n          <React.Fragment key={categoryName}>\n            <ListItem className={classes.categoryHeader}>\n              <ListItemText\n                classes={{\n                  primary: classes.categoryHeaderPrimary,\n                }}\n              >\n                {categoryName}\n              </ListItemText>\n            </ListItem>\n            {\n              items.map(({ name: childId, icon, active, url }) => (\n                <ListItem\n                  key={childId}\n                  button\n                  className={clsx(classes.item, active && classes.itemActiveItem)}\n                  onClick={ () => history.push(url)}\n                >\n                  <ListItemIcon className={classes.itemIcon}>{icon}</ListItemIcon>\n                  <ListItemText\n                    classes={{\n                      primary: classes.itemPrimary,\n                    }}\n                  >\n                    {childId}\n                  </ListItemText>\n                </ListItem>\n              ))\n            }\n\n            <Divider className={classes.divider} />\n          </React.Fragment>\n        ))}\n      </List>\n    </Drawer>\n  );\n}\n\nSidebar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Sidebar);","import { React, useState, useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom'\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport HelpIcon from '@material-ui/icons/Help';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport Box from '@material-ui/core/Box';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { withStyles } from '@material-ui/core/styles';\n\nimport constants from '../constants/index'\nimport { AuthContext } from '../AuthContext';\nconst seedrandom = require('seedrandom');\n\nconst COLOR_ARRAY = constants.COLOR_ARRAY;\n\nconst lightColor = 'rgba(255, 255, 255, 0.7)';\n\nconst styles = (theme) => ({\n  title: {\n    cursor: 'pointer'\n  },\n  appBar: {\n    zIndex: 9999,\n    padding: 8,\n    display: 'flex'\n  },\n  menuButton: {\n    marginLeft: -theme.spacing(1),\n  },\n  iconButtonAvatar: {\n    padding: 4,\n  },\n  link: {\n    textDecoration: 'none',\n    color: lightColor,\n    '&:hover': {\n      color: theme.palette.common.white,\n    },\n  },\n  button: {\n    borderColor: lightColor,\n  },\n});\nfunction Header(props) {\n  const { classes, onDrawerToggle } = props;\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [color, setColor] = useState(COLOR_ARRAY[0]);\n  const { currentUser, setCurrentUser } = useContext(AuthContext);\n  const history = useHistory();\n\n  const getColor = (name) => {\n    const rng = seedrandom(name);\n    let rand = Math.round(rng() * COLOR_ARRAY.length);\n    console.log('rand', rand)\n    return COLOR_ARRAY[rand];\n  }\n\n  const handleLogout = () => {\n    setAnchorEl(null)\n    setCurrentUser(null);\n    window.localStorage.removeItem('jwt');\n    history.replace('/login')\n  }\n\n  useEffect(() => {\n    setColor(getColor(currentUser.username));\n  }, [currentUser.username])\n\n  return (\n    <>\n      {/* <Hidden smUp>\n        <AppBar color=\"primary\" position=\"sticky\" elevation={0} className={classes.appBar}>\n          <Toolbar>\n            <Grid container spacing={1} alignItems=\"center\">\n              <Grid item>\n                <IconButton\n                  color=\"inherit\"\n                  aria-label=\"open drawer\"\n                  onClick={onDrawerToggle}\n                  className={classes.menuButton}\n                >\n                  <MenuIcon />\n                </IconButton>\n              </Grid>\n              <Typography color=\"inherit\" variant=\"h5\" component=\"h1\">\n                Messenger Pay\n              </Typography>\n            </Grid>\n          </Toolbar>\n        </AppBar>\n      </Hidden> */}\n      {/* <Hidden xsDown> */}\n      <AppBar\n        component=\"div\"\n        className={classes.appBar}\n        color=\"primary\"\n        position=\"sticky\"\n        elevation={2}\n      >\n        <Toolbar>\n          <Grid\n            container\n            alignItems=\"center\"\n            spacing={1}\n            style={{ justifyContent: 'space-between' }}\n          >\n            <Box pl={3}>\n              <Typography\n                color=\"inherit\"\n                variant=\"h4\"\n                className={classes.title}\n                onClick={() => history.push('/home')}\n              >\n                Messenger Pay\n              </Typography>\n            </Box>\n            <Box>\n              <Button className={classes.button} variant=\"outlined\" color=\"inherit\" size=\"small\">\n                Web setup\n              </Button>\n              <Tooltip title=\"Help\">\n                <IconButton color=\"inherit\" onClick={e => setAnchorEl(e.currentTarget)}>\n                  <HelpIcon />\n                </IconButton>\n              </Tooltip>\n              <Tooltip title=\"Alerts • No alerts\">\n                <IconButton color=\"inherit\">\n                  <NotificationsIcon />\n                </IconButton>\n              </Tooltip>\n              <IconButton color=\"inherit\" className={classes.iconButtonAvatar}>\n                <Avatar\n                  style={{ background: color }}\n                  onClick={e => setAnchorEl(e.currentTarget)}\n                >\n                  {currentUser.username ? currentUser.username[0] : ''}\n                </Avatar>\n              </IconButton>\n            </Box>\n          </Grid>\n        </Toolbar>\n      </AppBar>\n      <Menu\n        id=\"account-menu\"\n        anchorEl={anchorEl}\n        open={Boolean(anchorEl)}\n        onClose={() => setAnchorEl(null)}\n        keepMounted\n        getContentAnchorEl={null}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center'\n        }}\n      >\n        <MenuItem onClick={() => {\n          setAnchorEl(null);\n          history.push('/account');\n        }}>\n          Account\n        </MenuItem>\n        <MenuItem onClick={handleLogout}>Logout</MenuItem>\n      </Menu>\n      {/* </Hidden> */}\n    </>\n  );\n}\n\nHeader.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onDrawerToggle: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(Header);","import { createMuiTheme } from '@material-ui/core/styles'\n\nlet theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: '#63ccff',\n      main: '#009be5',\n      dark: '#006db3',\n    },\n  },\n  typography: {\n    h5: {\n      fontWeight: 500,\n      fontSize: 26,\n      letterSpacing: 0.5,\n    },\n    h4: {\n      fontWeight: 500,\n      fontSize: 32,\n      letterSpacing: 0.5,\n    },\n    fontSize: 18,\n    // fontFamily: [\n    //   '微軟正黑體',\n    //   'Roboto',\n    // ].join(',')\n  },\n  shape: {\n    borderRadius: 8,\n  },\n  props: {\n    MuiTab: {\n      disableRipple: true,\n    },\n  },\n  mixins: {\n    toolbar: {\n      minHeight: 48,\n    },\n  },\n});\n\ntheme = {\n  ...theme,\n  overrides: {\n    MuiDrawer: {\n      paper: {\n        backgroundColor: '#18202c',\n      },\n    },\n    MuiButton: {\n      label: {\n        textTransform: 'none',\n      },\n      contained: {\n        boxShadow: 'none',\n        '&:active': {\n          boxShadow: 'none',\n        },\n      },\n    },\n    MuiTabs: {\n      root: {\n        marginLeft: theme.spacing(1),\n      },\n      indicator: {\n        height: 3,\n        borderTopLeftRadius: 3,\n        borderTopRightRadius: 3,\n        backgroundColor: theme.palette.common.white,\n      },\n    },\n    MuiTab: {\n      root: {\n        textTransform: 'none',\n        margin: 'auto',\n        minWidth: 0,\n        padding: '0 12px',\n        [theme.breakpoints.up('xl')]: {\n          padding: 0,\n          minWidth: 0,\n        },\n        fontSize: 18\n      },\n    },\n    MuiIconButton: {\n      root: {\n        padding: theme.spacing(1),\n      },\n    },\n    MuiTooltip: {\n      tooltip: {\n        borderRadius: 4,\n      },\n    },\n    MuiDivider: {\n      root: {\n        backgroundColor: '#404854',\n      },\n    },\n    MuiListItemText: {\n      primary: {\n        fontWeight: theme.typography.fontWeightMedium,\n      },\n    },\n    MuiListItemIcon: {\n      root: {\n        color: 'inherit',\n        marginRight: 0,\n        '& svg': {\n          fontSize: 20,\n        },\n      },\n    },\n    MuiAvatar: {\n      root: {\n        width: 32,\n        height: 32,\n      },\n    },\n  },\n};\n\nexport default theme","import React, { useState } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom'\nimport PropTypes from 'prop-types';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Hidden from '@material-ui/core/Hidden';\nimport Typography from '@material-ui/core/Typography';\nimport Link from '@material-ui/core/Link';\nimport Sidebar from '../component/Sidebar';\nimport Content from '../component/Home';\nimport Header from '../component/Header';\nimport route from '../constants/route'\nimport theme from '../mateiralUITheme'\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\n        Messenger Pay\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst drawerWidth = 256;\n\nconst styles = {\n  root: {\n    display: 'flex',\n    minHeight: '100vh',\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  app: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  main: {\n    flex: 1,\n    padding: theme.spacing(6, 4),\n    background: '#eaeff1',\n  },\n  footer: {\n    padding: theme.spacing(2),\n    background: '#eaeff1',\n  },\n};\n\nfunction Full(props) {\n  const { classes } = props;\n  const [mobileOpen, setMobileOpen] = useState(false);\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <div className={classes.root}>\n        <CssBaseline />\n        {/* <nav className={classes.drawer}>\n          <Hidden smUp implementation=\"js\">\n            <Sidebar\n              PaperProps={{ style: { width: drawerWidth } }}\n              variant=\"temporary\"\n              open={mobileOpen}\n              onClose={handleDrawerToggle}\n            />\n          </Hidden>\n          <Hidden xsDown implementation=\"css\">\n            <Sidebar PaperProps={{ style: { width: drawerWidth } }} />\n          </Hidden>\n        </nav> */}\n        <div className={classes.app}>\n          <Header onDrawerToggle={handleDrawerToggle} />\n          <main className={classes.main}>\n            <Switch>\n              {route.route.map(link =>\n                <Route\n                  exact\n                  key={link.name}\n                  path={link.path}\n                  component={link.component}\n                />\n              )}\n            </Switch>\n            <Redirect from=\"/\" to=\"/home\" />\n          </main>\n          <footer className={classes.footer}>\n            <Copyright />\n          </footer>\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nFull.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Full);","import React, { useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport Box from '@material-ui/core/Box'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent\n} from '@material-ui/core'\nimport { AuthContext } from '../AuthContext'\nimport agent from '../agent'\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: '60%',\n    margin: '10% auto'\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  }\n}))\n\nfunction Login(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isWaiting, setIsWaiting] = useState(false);\n  const [isWaitingAuth, setIsWaitingAuth] = useState(true);\n  const { setCurrentUser } = useContext(AuthContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsWaiting(true);\n    try {\n      const body = {\n        username: username,\n        password: password\n      };\n      const result = await agent.Auth.login(body);\n      setIsWaiting(false);\n      console.log('result', result);\n      if (result.data.success) {\n        setCurrentUser({ username: username, isLogin: true, isTokenValid: true });\n        history.push('/');\n      } else {\n        console.log('result', result)\n        alert(result.data.error);\n      }\n    } catch (err) {\n      setIsWaiting(false);\n      console.log('err', err)\n    }\n  }\n\n  const checkAuth = async () => {\n    if (!window.localStorage.getItem('jwt')) {\n      setIsWaitingAuth(false);\n      return;\n    }\n    try {\n      let result = await agent.Auth.authorization();\n      if (result.data.success) {\n        setCurrentUser({ username: result.data.data.username, isLogin: true, isTokenValid: true });\n        history.push('/');\n      }\n      setIsWaitingAuth(false);\n    } catch (e) {\n      setCurrentUser(null);\n      setIsWaitingAuth(false);\n      console.log(e);\n    }\n  }\n\n  useEffect(() => {\n    checkAuth()\n  }, [])\n\n  return (\n    <div id=\"page-login\" className=\"container\">\n      {!isWaitingAuth &&\n        <form onSubmit={handleSubmit}>\n          <Paper className={classes.paper}>\n            <Box id=\"page-login__wrapper\" p={6}>\n              <Box my={2}>\n                <Typography variant=\"h3\">Login</Typography>\n              </Box>\n              <TextField\n                label=\"帳號\"\n                fullWidth\n                placeholder=\"請輸入您的帳號\"\n                margin=\"normal\"\n                required\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                InputLabelProps={{ shrink: true }}\n              />\n              <TextField\n                label=\"密碼\"\n                fullWidth\n                placeholder=\"請輸入您的密碼\"\n                margin=\"normal\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                type=\"password\"\n                InputLabelProps={{ shrink: true }}\n              />\n              <Box mt={7}>\n                <Button\n                  className={classes.button}\n                  type=\"submit\"\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\">\n                  登入\n                </Button>\n                <Button\n                  className={classes.button}\n                  color=\"primary\"\n                  onClick={() => {\n                    history.push('/register')\n                  }}>\n                  新增帳號\n                </Button>\n              </Box>\n            </Box>\n          </Paper>\n        </form>\n      }\n      <Backdrop className={classes.backdrop} open={isWaiting}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    </div>\n  )\n}\n\n// Login.propTypes = {\n//   isWaiting: PropTypes.bool.isRequired,\n//   errorMsg: PropTypes.string.isRequired,\n//   login: PropTypes.func.isRequired\n// }\n\nexport default Login\n","import React, { useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport Box from '@material-ui/core/Box'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Paper from '@material-ui/core/Paper'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent\n} from '@material-ui/core'\nimport { AuthContext } from '../AuthContext'\nimport agent from '../agent'\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    width: '60%',\n    margin: '10% auto'\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  }\n}))\n\nfunction Register(props) {\n  const classes = useStyles();\n  const history = useHistory();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [isWaiting, setIsWaiting] = useState(false);\n  const { setCurrentUser } = useContext(AuthContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsWaiting(true);\n    try {\n      const body = {\n        username: username,\n        password: password,\n        name: username\n      };\n      const result = await agent.User.createUser(body);\n      setIsWaiting(false);\n      console.log('result', result);\n      if (result.data.success) {\n        setCurrentUser({ ...result.data.data, isLogin: true });\n        history.push('/');\n      } else {\n        console.log('result', result)\n        alert(result.data.error);\n      }\n    } catch (err) {\n      setIsWaiting(false);\n      console.log('err', err)\n    }\n  }\n\n  return (\n    <div id=\"page-login\" className=\"container\">\n      <form onSubmit={handleSubmit}>\n        <Paper className={classes.paper}>\n          <Box id=\"page-login__wrapper\" p={6}>\n            <Box my={2}>\n              <Typography variant=\"h3\">Register</Typography>\n            </Box>\n            <TextField\n              label=\"帳號\"\n              fullWidth\n              placeholder=\"請輸入帳號\"\n              margin=\"normal\"\n              required\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              InputLabelProps={{ shrink: true }}\n            />\n            <TextField\n              label=\"密碼\"\n              fullWidth\n              placeholder=\"請輸入密碼\"\n              margin=\"normal\"\n              required\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              type=\"password\"\n              InputLabelProps={{ shrink: true }}\n            />\n            <Box mt={7}>\n              <Button\n                className={classes.button}\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"large\">\n                新增帳號\n              </Button>\n              <Button\n                className={classes.button}\n                color=\"primary\"\n                onClick={() => {\n                  history.push('/login')\n                }}>\n                返回登入\n              </Button>\n            </Box>\n          </Box>\n        </Paper>\n      </form>\n      <Backdrop className={classes.backdrop} open={isWaiting}>\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    </div>\n  )\n}\n\n\nexport default Register\n","import { Route, Switch } from 'react-router-dom'\nimport './App.css';\nimport AuthContext from './AuthContext'\nimport Full from './container/Full'\nimport Login from './component/Login'\nimport Register from './component/Register'\n\nfunction App() {\n  return (\n    <AuthContext>\n      <Switch>\n        <Route path=\"/login\" name=\"login\" component={Login} />\n        <Route path=\"/register\" name=\"register\" component={Register} />\n        <Route path=\"/\" name=\"full\" component={Full} />\n      </Switch>\n    </AuthContext >\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
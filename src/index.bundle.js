(()=>{"use strict";const e=require("mongoose"),o=require("express"),r=require("cors"),s=require("body-parser"),n=require("cookie-parser");require("dotenv-defaults").config();const u=o(),t=process.env.PORT||4e3;e.set("useCreateIndex",!0),process.env.MONGO_URL||(console.error("Missing MONGO_URL!!!"),process.exit(1)),e.connect(process.env.MONGO_URL,{useNewUrlParser:!0,useUnifiedTopology:!0});const i=e.connection;i.on("error",(e=>{console.error(e)})),i.once("open",(()=>{console.log("MongoDB connected!")})),u.listen(t,(()=>console.log(`Example app listening on port ${t}!`))),u.use(o.static(__dirname+"/../frontend/build")),u.use(r()),u.use(n()),u.use(s.urlencoded({extended:!0})),u.use(s.json()),u.use(((e,o,r)=>{console.log("URL",e.method+" "+e.originalUrl),console.log("req body",e.body),console.log("req query",e.query),r()})),u.get("/",((e,o)=>{o.send("Hi, The API is at http://localhost:"+t+"/api")}));const c=require("./routes/auth"),l=require("./routes/user"),p=require("./routes/event"),a=require("./routes/group");u.use("/api/auth",c),u.use("/api/user",l),u.use("/api/event",p),u.use("/api/group",a)})();